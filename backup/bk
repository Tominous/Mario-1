import discord
from discord.ext import commands
import os
import random
import numpy as np

token = os.environ.get("token")

bot = commands.Bot(command_prefix=".", description="Del")
bot.remove_command('help')


#help 
@bot.command(description='Menù di aiuto.')
async def help(ctx):
    embed = discord.Embed(title="CASE", colour=discord.Colour(0x395966), timestamp=ctx.message.created_at)
    embed.set_author(name=f"{ctx.author.name}", icon_url=f"{ctx.author.avatar_url}")
    embed.set_footer(text="CASE Beta")
    for x in bot.commands:
        if not x.hidden:
            if not x.description:
                embed.add_field(name=f"{bot.command_prefix}{x.name}", value=f'non c è descrizione', inline=False)
            else:
                embed.add_field(name=f"{bot.command_prefix}{x.name}", value=f'```{x.description}```', inline=False)
    await ctx.send(embed = embed)

#status
@bot.event
async def on_ready():
    print("Sono online come", bot.user)
    await bot.change_presence(activity=discord.Game(name=".help"))

#comandi

bot.value = 1

@bot.command(description='Spegni CASE.')
async def off(ctx):
    try:
      await ctx.message.delete()
   except:
      pass
  bot.value = 1
  embed = discord.Embed(title = "Caricamento...", description = "❌Case Offline.", colour = 0x395966)
  await ctx.send(embed = embed, delete_after = 5)

@bot.command(description='Avvia CASE.')
async def on(ctx):
    try:
      await ctx.message.delete()
    except:
      pass # per cancellare il messaggio
    bot.value = 0
    embed = discord.Embed(title = "Caricamento...", description = "✅CASE Online.", colour = 0x395966)
    await ctx.send(embed = embed, delete_after = 5)

#invita
@bot.command(description='Invita CASE nel tuo server')
async def invita(ctx):

  embed = discord.Embed(title = "Invita CASE nel tuo server", description = "https://discord.com/api/oauth2/authorize?client_id=714364815833038858&permissions=76800&scope=bot", colour = 0x395966)
  await ctx.send(embed = embed)

#libreria
@bot.command(description='Visualizza la libreria di CASE.')
async def libreria(ctx):

  embed = discord.Embed(title = "Libreria di CASE", description = "```ciao, ok, rip, f, case```", colour = 0x395966)
  await ctx.send(embed = embed)



# triggered
@bot.event
async def on_message(message):
    await bot.process_commands(message)
    if not message.author.bot:
        if bot.value == 0:
            if message.content.lower() == "ciao":
                ciao = ['Ciao', 'Salve', 'Buondì', 'Buongiorno']
                await message.channel.send(f"{random.choice(ciao)} {message.author.mention}")

            if message.content.lower() == "ok":
                su = ['gg', 'k', 'kk']
                await message.channel.send(f"{random.choice(su)} {message.author.mention}")

            if message.content.lower() == "rip":
                salve = ['https://tenor.com/view/rip-coffin-black-ghana-celebrating-gif-16743302', 'https://tenor.com/view/davis-boreanaz-salute-uniform-gif-4762830']
                await message.channel.send(f"{random.choice(salve)}")

            if message.content.lower() == "f":
                salve = ['F', '```Press F to Pay Respect```']
                await message.channel.send(f"{random.choice(salve)}")

            if message.content.lower() == "case":
                salve = ['Eccomi!', 'CASE a rapporto!', 'A rapporto!']
                await message.channel.send(f"{random.choice(salve)}")
                
bot.run(token)